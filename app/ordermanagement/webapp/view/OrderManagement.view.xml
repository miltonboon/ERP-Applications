<mvc:View controllerName="ordermanagement.ordermanagement.controller.OrderManagement"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f">
    <f:FlexibleColumnLayout id="fcl" layout="OneColumn">
        <f:beginColumnPages>
            <Page showHeader="false" enableScrolling="true" class="sapUiNoContentPadding">
                <VBox width="100%" class="sapUiNoMargin sapUiNoPadding">
                    <OverflowToolbar height="2.75rem" design="Transparent">
                        <Title text="Orders" level="H3"/>
                        <ToolbarSpacer/>
                        <SearchField width="17.5rem" placeholder="Search by customer" search=".onSearch" class="sapUiTinyMarginTop sapUiTinyMarginBottom"/>
                        <Button type="Transparent" icon="sap-icon://add" press=".onOpenCreateOrder" tooltip="Create order"/>
                        <Button type="Transparent" icon="sap-icon://sort" press=".onOpenSortPopover"/>
                        <Button type="Transparent" icon="sap-icon://filter" press=".onOpenFilterPopover"/>
                    </OverflowToolbar>
                    <Panel id="panelSubmitted" headerText="Submitted" expandable="true" expanded="true" class="sapUiNoContentPadding sapUiTinyMargin" backgroundDesign="Transparent">
                        <List id="listSubmitted" mode="SingleSelectMaster" includeItemInSelection="true"
                            growing="true" growingScrollToLoad="true" growingThreshold="20"
                            inset="false"
                            class="sapUiNoMargin"
                            items="{
                                path: '/OrdersOverview',
                                parameters: { $select: 'ID,date,type,status,customerFirstName,customerLastName,totalAmount' }
                            }"
                            selectionChange=".onSelectOrder">
                            <items>
                                <ObjectListItem
                                    title="{ parts: [ {path: 'customerFirstName'}, {path: 'customerLastName'} ], formatter: '.formatCustomerName' }"
                                    intro="{ path: 'type', formatter: '.formatOrderType' }"
                                    number="{ path: 'totalAmount', formatter: '.formatAmount' }"
                                    numberUnit="EUR"
                                    type="Active">
                                    <attributes>
                                        <ObjectAttribute text="{ path: 'date', formatter: '.formatDate' }"/>
                                    </attributes>
                                    <firstStatus>
                                        <ObjectStatus text="{status}" state="{ path: 'status', formatter: '.formatStatusState' }"/>
                                    </firstStatus>
                                </ObjectListItem>
                            </items>
                        </List>
                    </Panel>

                    <Panel id="panelPaid" headerText="Paid" expandable="true" expanded="false" class="sapUiNoContentPadding sapUiTinyMargin" backgroundDesign="Transparent">
                        <List id="listPaid" mode="SingleSelectMaster" includeItemInSelection="true"
                            growing="true" growingScrollToLoad="true" growingThreshold="20"
                            inset="false"
                            class="sapUiNoMargin"
                            items="{
                                path: '/OrdersOverview',
                                parameters: { $select: 'ID,date,type,status,customerFirstName,customerLastName,totalAmount' }
                            }"
                            selectionChange=".onSelectOrder">
                            <items>
                                <ObjectListItem
                                    title="{ parts: [ {path: 'customerFirstName'}, {path: 'customerLastName'} ], formatter: '.formatCustomerName' }"
                                    intro="{ path: 'type', formatter: '.formatOrderType' }"
                                    number="{ path: 'totalAmount', formatter: '.formatAmount' }"
                                    numberUnit="EUR"
                                    type="Active">
                                    <attributes>
                                        <ObjectAttribute text="{ path: 'date', formatter: '.formatDate' }"/>
                                    </attributes>
                                    <firstStatus>
                                        <ObjectStatus text="{status}" state="{ path: 'status', formatter: '.formatStatusState' }"/>
                                    </firstStatus>
                                </ObjectListItem>
                            </items>
                        </List>
                    </Panel>

                    <Panel id="panelCancelled" headerText="Cancelled" expandable="true" expanded="false" class="sapUiNoContentPadding sapUiTinyMargin" backgroundDesign="Transparent">
                        <List id="listCancelled" mode="SingleSelectMaster" includeItemInSelection="true"
                            growing="true" growingScrollToLoad="true" growingThreshold="20"
                            inset="false"
                            class="sapUiNoMargin"
                            items="{
                                path: '/OrdersOverview',
                                parameters: { $select: 'ID,date,type,status,customerFirstName,customerLastName,totalAmount' }
                            }"
                            selectionChange=".onSelectOrder">
                            <items>
                                <ObjectListItem
                                    title="{ parts: [ {path: 'customerFirstName'}, {path: 'customerLastName'} ], formatter: '.formatCustomerName' }"
                                    intro="{ path: 'type', formatter: '.formatOrderType' }"
                                    number="{ path: 'totalAmount', formatter: '.formatAmount' }"
                                    numberUnit="EUR"
                                    type="Active">
                                    <attributes>
                                        <ObjectAttribute text="{ path: 'date', formatter: '.formatDate' }"/>
                                    </attributes>
                                    <firstStatus>
                                        <ObjectStatus text="{status}" state="{ path: 'status', formatter: '.formatStatusState' }"/>
                                    </firstStatus>
                                </ObjectListItem>
                            </items>
                        </List>
                    </Panel>
                </VBox>
            </Page>
        </f:beginColumnPages>
        <f:midColumnPages>
            <mvc:XMLView viewName="ordermanagement.ordermanagement.view.OrderDetail" id="detailView"/>
        </f:midColumnPages>
    </f:FlexibleColumnLayout>
</mvc:View>
