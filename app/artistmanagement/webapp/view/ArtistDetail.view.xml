<mvc:View controllerName="artistmanagement.artistmanagement.controller.ArtistDetail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.uxap"
    xmlns:m="sap.m">
    <ObjectPageLayout id="detailPage"
        showTitleInHeaderContent="true"
        upperCaseAnchorBar="false"
        headerContentPinnable="false"
        height="100%">
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <expandedHeading>
                    <m:HBox alignItems="Center" renderType="Bare">
                        <m:Button type="Transparent" icon="sap-icon://nav-back" press=".onCloseDetail" tooltip="Back" class="sapUiTinyMarginEnd"/>
                        <m:Title text="{detail>/name}" wrapping="true"/>
                    </m:HBox>
                </expandedHeading>
                <snappedHeading>
                    <m:HBox alignItems="Center" renderType="Bare">
                        <m:Button type="Transparent" icon="sap-icon://nav-back" press=".onCloseDetail" tooltip="Back" class="sapUiTinyMarginEnd"/>
                        <m:Title text="{detail>/name}" wrapping="true"/>
                    </m:HBox>
                </snappedHeading>
                <actions>
                    <m:Button text="Edit Artist" type="Emphasized" icon="sap-icon://edit" press=".onOpenEditDetails"/>
                </actions>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>
        <headerContent>
            <m:FlexBox wrap="Wrap" fitContainer="true" alignItems="Center">
                <m:VBox class="sapUiSmallMarginEnd">
                    <m:Label text="Popularity"/>
                    <m:RatingIndicator maxValue="5" value="{detail>/popularityScore}" enabled="false" displayOnly="true" iconSize="1.2rem"/>
                </m:VBox>
                <m:VBox class="sapUiSmallMarginEnd" visible="{= !!${detail>/spotifyUrl} }">
                    <m:Label text="Spotify"/>
                    <m:Link text="{detail>/name}" href="{path: 'detail>/spotifyUrl', formatter: '.formatSpotifyHref'}" target="_blank"/>
                </m:VBox>
                <m:VBox class="sapUiSmallMarginEnd" visible="{= !!${detail>/instagramHandle} }">
                    <m:Label text="Instagram"/>
                    <m:Link text="{detail>/instagramHandle}" href="{path: 'detail>/instagramHandle', formatter: '.formatInstagramHref'}" target="_blank"/>
                </m:VBox>
            </m:FlexBox>
        </headerContent>
        <sections>
            <ObjectPageSection title="Artist Info">
                <subSections>
                    <ObjectPageSubSection>
                        <blocks>
                            <m:VBox class="sapUiSmallMargin">
                                <m:HBox alignItems="Center" class="sapUiTinyMarginBottom">
                                    <m:Label text="Genres" width="6rem"/>
                                    <m:Text text="{path: 'detail>/genres', formatter: '.formatGenre', targetType: 'any'}"/>
                                </m:HBox>
                                <m:HBox alignItems="Center" class="sapUiTinyMarginBottom">
                                    <m:Label text="Country" width="6rem"/>
                                    <m:Text text="{detail>/country}"/>
                                </m:HBox>
                                <m:Label text="Biography" class="sapUiTinyMarginBottom" visible="{= !!${detail>/biography} }"/>
                                <m:Text text="{detail>/biography}" wrapping="true" visible="{= !!${detail>/biography} }"/>
                            </m:VBox>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
            <ObjectPageSection title="Performances">
                <subSections>
                    <ObjectPageSubSection>
                        <blocks>
                            <m:VBox class="sapUiSmallMargin">
                                <m:HBox justifyContent="End" class="sapUiTinyMarginBottom">
                                    <m:Button text="Manage performances" icon="sap-icon://activity-items" type="Transparent" press=".onOpenManagePerformances"/>
                                </m:HBox>
                                <m:List id="performancesList" items="{detail>/performances}" noDataText="No performances available" inset="true">
                                    <m:CustomListItem class="sapUiSmallMarginBottom">
                                        <m:VBox width="100%" class="sapUiSmallMarginBottom">
                                            <m:HBox justifyContent="SpaceBetween" alignItems="Center">
                                                <m:Text text="{detail>stageName}"/>
                                                <m:Text text="{parts: [{path: 'detail>dayLabel'}, {path: 'detail>startTime'}, {path: 'detail>endTime'}, {path: 'detail>dayDate'}], formatter: '.formatPerformanceSlot'}"/>
                                            </m:HBox>
                                        </m:VBox>
                                    </m:CustomListItem>
                                </m:List>
                            </m:VBox>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
            <ObjectPageSection title="Reviews">
                <subSections>
                    <ObjectPageSubSection>
                        <blocks>
                            <m:VBox class="sapUiSmallMargin">
                                <m:HBox justifyContent="End" class="sapUiTinyMarginBottom">
                                    <m:Button text="New review" type="Emphasized" icon="sap-icon://add" press=".onOpenAddReview"
                                        enabled="{= ${detail>/performances}.length > 0 }"/>
                                </m:HBox>
                                <m:List id="reviewsList" items="{detail>/reviews}" noDataText="No reviews available" inset="true">
                                    <m:CustomListItem class="sapUiSmallMarginBottom">
                                        <m:VBox width="100%" class="sapUiSmallMarginBottom">
                                            <m:HBox justifyContent="SpaceBetween" alignItems="Center">
                                                <m:Text text="{detail>customerName}"/>
                                                <m:RatingIndicator maxValue="5" value="{detail>rating}" enabled="false" displayOnly="true" iconSize="1.1rem"/>
                                            </m:HBox>
                                            <m:Text text="{detail>comment}" wrapping="true" class="sapUiTinyMarginTop"/>
                                            <m:HBox justifyContent="End" class="sapUiTinyMarginTop">
                                                <m:Text text="{path: 'detail>date', formatter: '.formatDate'}"/>
                                            </m:HBox>
                                        </m:VBox>
                                    </m:CustomListItem>
                                </m:List>
                            </m:VBox>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
        </sections>
    </ObjectPageLayout>
</mvc:View>
